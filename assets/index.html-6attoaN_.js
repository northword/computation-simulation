import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as i,c as p,a as s,b as a,e as m,w as c,d as n}from"./app-1ZTmwhuN.js";const r="/assets/image-02.vasp-chg-diff-20221119172425312-FQuXE-oc.png",o="/assets/image-02.vasp-chg-diff-20221119172425350-NEh4dsTO.png",u={},d=s("h1",{id:"vasp-计算电荷密度差",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#vasp-计算电荷密度差","aria-hidden":"true"},"#"),a(" VASP 计算电荷密度差")],-1),h=s("p",null,[a("文献中常用的差分电荷密度图为二次差分电荷密度图 (difference charge density)，区别于差分电荷密度图 (deformation charge density)。差分电荷定义为"),s("strong",null,"成键后的电荷密度与对应的点的原子电荷密度之差"),a("。通过差分电荷密度的计算和分析，可以清楚地得到在"),s("strong",null,"成键和成键电子耦合过程中的电荷移动以及成键极化方向等性质"),a("。“二次”是指同一个体系化学成分或者几何构型改变之后电荷的重新分布。Deformation charge density 的公式定义为 (1)，Difference charge density 的公式定义为 (2)。Difference charge density 是文献中最常用的方法。")],-1),v=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"ρ"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("msub",null,[s("mi",null,"B"),s("mrow",null,[s("mi",null,"S"),s("mi",null,"C")])])])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("msub",null,[s("mi",null,"B"),s("mrow",null,[s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"o"),s("mi",null,"m")])])])]),s("mspace",{width:"2em"}),s("mo",{stretchy:"false"},"("),s("mn",null,"1"),s("mo",{stretchy:"false"},")"),s("mspace",{linebreak:"newline"}),s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"ρ"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"B")])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"A")]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"B")]),s("mspace",{width:"2em"}),s("mo",{stretchy:"false"},"("),s("mn",null,"2"),s("mo",{stretchy:"false"},")"),s("mspace",{linebreak:"newline"}),s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"ρ"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"B"),s("mi",null,"C")])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"A")]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"B")]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"C")]),s("mspace",{width:"2em"}),s("mo",{stretchy:"false"},"("),s("mn",null,"3"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"}," \\Delta \\rho = \\rho_{AB_{SC}}-\\rho_{AB_{atom}} \\qquad (1)\\\\ \\Delta \\rho = \\rho_{AB}-\\rho_A-\\rho_B \\qquad (2)\\\\ \\Delta \\rho = \\rho_{ABC}-\\rho_{A}-\\rho_{B}-\\rho_{C} \\qquad (3) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8336em","vertical-align":"-0.2503em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3448em"}},[s("span",{style:{top:"-2.3567em","margin-left":"-0.0502em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"SC")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1433em"}},[s("span")])])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2503em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0001em","vertical-align":"-0.2501em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2963em"}},[s("span",{style:{top:"-2.357em","margin-left":"-0.0502em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"m")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.143em"}},[s("span")])])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2501em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"2em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},")")]),s("span",{class:"mspace newline"}),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"A")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"2em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"2"),s("span",{class:"mclose"},")")]),s("span",{class:"mspace newline"}),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"BC")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"2em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"3"),s("span",{class:"mclose"},")")])])])])],-1),g=s("p",null,[a("以计算 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"O"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"O_2")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"O"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0278em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("电荷密度差为例，记录如何获得 O2 的 Difference charge density。")],-1),b=s("h2",{id:"流程",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#流程","aria-hidden":"true"},"#"),a(" 流程")],-1),k=s("p",null,"以 A-B 型为例",-1),y=s("ul",null,[s("li",null,"对 AB 进行结构优化"),s("li",null,[a("分别对 AB、A、B 分别静电自洽（不能结构优化） "),s("ul",null,[s("li",null,"FFT mesh 需要一致"),s("li",null,"LCHARG 需要打开")])]),s("li",null,"求差（chgsun.pl CHGCAR_A CHGCAR_B；chgdiff.pl CHGCAR_AB CHGCAR_sum）")],-1),C=n(`<h2 id="目录结构" tabindex="-1"><a class="header-anchor" href="#目录结构" aria-hidden="true">#</a> 目录结构</h2><details class="hint-container details"><summary>详情</summary><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ tree
<span class="token builtin class-name">.</span>
├── O2             <span class="token comment"># 在此目录对O2分子进行结构优化，然后静电自洽</span>
│   ├── CHG
│   ├── CHGCAR
│   ├── CONTCAR
│   ├── INCAR
│   ├── KPOINTS
│   ├── OSZICAR
│   ├── OUTCAR
│   ├── POSCAR
│   ├── POTCAR
│   ├── stdout
│   └── vasp.pbs
├── A              <span class="token comment"># 对其中一个O进行静电自洽</span>
│   ├── CHG
│   ├── CHGCAR
│   ├── CONTCAR
│   ├── INCAR
│   ├── KPOINTS
│   ├── OSZICAR
│   ├── OUTCAR
│   ├── out.log
│   ├── POSCAR
│   ├── POTCAR
│   ├── stdout
│   └── vasp.pbs
├── B              <span class="token comment"># 对另一个O进行静电自洽</span>
│   ├── CHG
│   ├── CHGCAR
│   ├── CONTCAR
│   ├── INCAR
│   ├── KPOINTS
│   ├── OSZICAR
│   ├── OUTCAR
│   ├── POSCAR
│   ├── POTCAR
│   ├── REPORT
│   ├── stdout
│   └── vasp.pbs
├── CHGCAR_diff   <span class="token comment"># 差分电荷密度</span>
└── CHGCAR_sum    <span class="token comment"># 两个单独O加在一起的电荷密度</span>

<span class="token number">3</span> directories, <span class="token number">62</span> files
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h2><h3 id="step1-对-ab-进行结构优化-geo" tabindex="-1"><a class="header-anchor" href="#step1-对-ab-进行结构优化-geo" aria-hidden="true">#</a> Step1：对 AB 进行结构优化 geo</h3><p>在 <code>O2</code> 目录中对 O2 进行结构优化</p><p>:::: tabs</p><p>::: tab POSCAR</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[zjb@op O2]$ cat POSCAR：
O2
1
10 0 0
0 10 0
0 0 12
O
2
S
D
0.5 0.5 0.5   F F F
0.5 0.5 0.62  F F T
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab INCAR</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[zjb@op O2]$ cat INCAR：
Global Parameters
 ISTART =  1            (Read existing wavefunction; if there)
 ISPIN =  2           (Spin polarised DFT)
 ICHARG =  2         (Non-self-consistent: GGA/LDA band structures)
 LREAL  = .FALSE.          (Projection operators: automatic)
 ENCUT  =  400        (Cut-off energy for plane wave basis set, in eV)
 PREC   =  Normal       (Precision level)
 LWAVE  = .TRUE.        (Write WAVECAR or not)
 LCHARG = .TRUE.        (Write CHGCAR or not)
 ADDGRID= .TRUE.        (Increase grid; helps GGA convergence)
 NGXF    = 150         (FFT grid mesh density for nice charge/potential plots)
 NGYF    = 150         (FFT grid mesh density for nice charge/potential plots)
 NGZF    = 180         (FFT grid mesh density for nice charge/potential plots)

Electronic Relaxation
ISMEAR =  0            (Gaussian smearing; metals:1)
SIGMA  =  0.05         (Smearing value in eV; metals:0.2)
NELM   =  60           (Max electronic SCF steps)
NELMIN =  4            (Min electronic SCF steps)
EDIFF  =  1E-06        (SCF energy convergence; in eV)

Ionic Relaxation
NSW    =  20          (Max electronic SCF steps)
IBRION =  2            (Algorithm: 0-MD; 1-Quasi-New; 2-CG)
ISIF   =  2            (Stress/relaxation: 2-Ions, 3-Shape/Ions/V, 4-Shape/Ions)
EDIFFG = -2E-02        (Ionic convergence; eV/AA)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab CONTCAR</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[zjb@op O2]$ cat CONTCAR
O2                                      
   1.00000000000000     
    10.0000000000000000    0.0000000000000000    0.0000000000000000
     0.0000000000000000   10.0000000000000000    0.0000000000000000
     0.0000000000000000    0.0000000000000000   12.0000000000000000
   O 
     2
Selective dynamics
Direct
  0.5000000000000000  0.5000000000000000  0.5000000000000000   F   F   F
  0.5000000000000000  0.5000000000000000  0.6028640220057100   F   F   T
 
  0.00000000E+00  0.00000000E+00  0.00000000E+00
  0.00000000E+00  0.00000000E+00  0.00000000E+00
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::::</p><p>结构优化完成之后将 <code>CONTCAR</code> 作为新的 <code>POSCAR</code> 进行后续运算。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token punctuation">[</span>zjb@op O2<span class="token punctuation">]</span>$ <span class="token function">cp</span> COUTCAR POSCAR
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="step2-静电自洽" tabindex="-1"><a class="header-anchor" href="#step2-静电自洽" aria-hidden="true">#</a> Step2：静电自洽</h3><div class="hint-container tip"><p class="hint-container-title">提示</p><p>三次静电自洽需要注意：</p><ul><li>FFT mesh 需要一致</li><li>LCHARG 需要打开</li></ul></div><h4 id="对-a-b-进行静电自洽-scf" tabindex="-1"><a class="header-anchor" href="#对-a-b-进行静电自洽-scf" aria-hidden="true">#</a> 对 A-B 进行静电自洽 scf</h4><p>将上一步的 <code>INCAR</code> 修改，使其满足静电自洽的运行：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>NSW = 0
IBRION = -1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>提交作业进行静电自洽。</p><h4 id="对-a、b-分别静电自洽" tabindex="-1"><a class="header-anchor" href="#对-a、b-分别静电自洽" aria-hidden="true">#</a> 对 A、B 分别静电自洽</h4><p>将 A-B 静电自洽用的 INCAR、POSCAR、POTCAR、KPOINTS 复制出来，分别放在 A 和 B 目录中。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>zjb@op O2<span class="token punctuation">]</span>$ <span class="token function">cp</span> INCAR POSCAR POTCAR KPOINTS <span class="token punctuation">..</span>/A/
<span class="token punctuation">[</span>zjb@op O2<span class="token punctuation">]</span>$ <span class="token function">cp</span> INCAR POSCAR POTCAR KPOINTS <span class="token punctuation">..</span>/B/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在 A 目录的 POSCAR 中删除 B 部分对应的点，元素数量改一下，得到 A 部分的 POSCAR，提交作业静电自洽。</p><p>在 B 目录的 POSCAR 中删除 A 部分对应的点，元素数量改一下，得到 B 部分的 POSCAR，提交作业静电自洽。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ <span class="token function">cat</span> A/POSCAR 
O2                                      
   <span class="token number">1.00000000000000</span>     
    <span class="token number">10.0000000000000000</span>    <span class="token number">0.0000000000000000</span>    <span class="token number">0.0000000000000000</span>
     <span class="token number">0.0000000000000000</span>   <span class="token number">10.0000000000000000</span>    <span class="token number">0.0000000000000000</span>
     <span class="token number">0.0000000000000000</span>    <span class="token number">0.0000000000000000</span>   <span class="token number">12.0000000000000000</span>
   O 
     <span class="token number">1</span>
Selective dynamics
Direct
  <span class="token number">0.5000000000000000</span>  <span class="token number">0.5000000000000000</span>  <span class="token number">0.5000000000000000</span>   F   F   F
 
  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00
  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00

<span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ <span class="token function">cat</span> B/POSCAR 
O2                                      
   <span class="token number">1.00000000000000</span>     
    <span class="token number">10.0000000000000000</span>    <span class="token number">0.0000000000000000</span>    <span class="token number">0.0000000000000000</span>
     <span class="token number">0.0000000000000000</span>   <span class="token number">10.0000000000000000</span>    <span class="token number">0.0000000000000000</span>
     <span class="token number">0.0000000000000000</span>    <span class="token number">0.0000000000000000</span>   <span class="token number">12.0000000000000000</span>
   O 
     <span class="token number">1</span>
Selective dynamics
Direct
  <span class="token number">0.5000000000000000</span>  <span class="token number">0.5000000000000000</span>  <span class="token number">0.6028640220057100</span>   F   F   T
 
  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00
  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00  <span class="token number">0</span>.00000000E+00

</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="step3-求差" tabindex="-1"><a class="header-anchor" href="#step3-求差" aria-hidden="true">#</a> Step3：求差</h3><p>求差也可以使用 <code>VASPKIT</code> 提供的功能。</p><p>在主菜单选择 <code>31) Charge &amp; Spin Density</code>，之后进入 <code>314) Charge-Density Difference</code>，在下一个界面提示输入 <code>O2/CHGCAR A/CHGCAR B/CHGCAR</code>。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> File Options <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
 Input the Names of Charge/Potential Files with Space: 
 <span class="token punctuation">(</span>e.g., to get AB-A-B, type: ~/AB/CHGCAR ./A/CHGCAR <span class="token punctuation">..</span>/B/CHGCAR<span class="token punctuation">)</span>
 
 ------------<span class="token operator">&gt;&gt;</span>
O2/CHGCAR A/CHGCAR B/CHGCAR
 
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>01<span class="token punctuation">)</span> Reading Structural Parameters from O2/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>02<span class="token punctuation">)</span> Reading Charge Density From O2/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>03<span class="token punctuation">)</span> Reading Structural Parameters from A/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>04<span class="token punctuation">)</span> Reading Charge Density From A/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>05<span class="token punctuation">)</span> Reading Structural Parameters from B/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>06<span class="token punctuation">)</span> Reading Charge Density From B/CHGCAR File<span class="token punctuation">..</span>.
  --<span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>07<span class="token punctuation">)</span> Written CHGDIFF.vasp File<span class="token operator">!</span>
 +---------------------------------------------------------------+
 <span class="token operator">|</span>                       * ACKNOWLEDGMENTS *                     <span class="token operator">|</span>
 <span class="token operator">|</span> Other Contributors: Xue-Fei LIU, Peng-Fei LIU, Dao-Xiong WU,  <span class="token operator">|</span>
 <span class="token operator">|</span> Zhao-Fu ZHANG, Tian WANG, Ya-Chao LIU, Qiang LI, iGo and You<span class="token operator">!</span> <span class="token operator">|</span>
 +---------------------------------------------------------------+
 <span class="token operator">|</span>                          * CITATIONS *                        <span class="token operator">|</span>
 <span class="token operator">|</span> We Would Appreciate <span class="token keyword">if</span> You Cite <span class="token keyword">in</span> Your Research with VASPKIT.<span class="token operator">|</span>
 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> V. Wang, N. Xu, J.C. LIU, G. Tang, et al, VASPKIT: A Pre- <span class="token operator">|</span>
 <span class="token operator">|</span> and Post-Processing Program <span class="token keyword">for</span> VASP Code, arXiv:1908.08269.  <span class="token operator">|</span>
 +---------------------------------------------------------------+
<span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ <span class="token function">ls</span>
A  B  CHGCAR_diff  CHGCAR_sum  CHGDIFF.vasp  O2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出一个 <code>CHGDIFF.vasp</code>，即为所求，下载，VESTA 打开：</p><figure><img src="`+r+`" alt="CHGDIFF.vasp" tabindex="0" loading="lazy"><figcaption>CHGDIFF.vasp</figcaption></figure><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h2><h3 id="求差的其他方法" tabindex="-1"><a class="header-anchor" href="#求差的其他方法" aria-hidden="true">#</a> 求差的其他方法</h3><h4 id="chgsum-pl" tabindex="-1"><a class="header-anchor" href="#chgsum-pl" aria-hidden="true">#</a> chgsum.pl</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#Usage</span>
$ chgsum.pl <span class="token operator">&lt;</span>CHGCAR_A<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>CHGCAR_B<span class="token operator">&gt;</span>  <span class="token comment"># output: CHGCAR_sum</span>

<span class="token comment"># This example</span>
 <span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ chgsum.pl A/CHGCAR B/CHGCAR
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>作用为：</p>`,41),A=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"C"),s("mi",null,"H"),s("mi",null,"G"),s("mi",null,"C"),s("mi",null,"A"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"s"),s("mi",null,"u"),s("mi",null,"m"),s("mo",{stretchy:"false"},")")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"A")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"B")])]),s("annotation",{encoding:"application/x-tex"}," \\rho_{(CHGCAR\\_sum)} = \\rho_{A} + \\rho_B ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8278em","vertical-align":"-0.3972em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3448em"}},[s("span",{style:{top:"-2.5198em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mopen mtight"},"("),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.08125em"}},"H"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"GC"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight"},"m"),s("span",{class:"mclose mtight"},")")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3972em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])])])],-1),f=n(`<p>运行后在 <code>O2_chg_diff/</code> 下生成了一个 <code>CHGCAR_sum</code> 文件。</p><h4 id="chgdiff-pl" tabindex="-1"><a class="header-anchor" href="#chgdiff-pl" aria-hidden="true">#</a> chgdiff.pl</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Usage</span>
chgdiff.pl <span class="token operator">&lt;</span>CHGCAR_sum<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>CHGCAR_AB<span class="token operator">&gt;</span>  <span class="token comment"># output: CHGCAR_diff</span>

<span class="token comment"># This example</span>
 <span class="token punctuation">[</span>zjb@op O2_chg_diff<span class="token punctuation">]</span>$ chgdiff.pl O2/CHGCAR CHGCAR_sum
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意是后面的减前面的：</p>`,4),R=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"C"),s("mi",null,"H"),s("mi",null,"G"),s("mi",null,"C"),s("mi",null,"A"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"d"),s("mi",null,"i"),s("mi",null,"f"),s("mi",null,"f"),s("mo",{stretchy:"false"},")")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"C"),s("mi",null,"H"),s("mi",null,"G"),s("mi",null,"C"),s("mi",null,"A"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"A"),s("mi",null,"B")])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"C"),s("mi",null,"H"),s("mi",null,"G"),s("mi",null,"C"),s("mi",null,"A"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"s"),s("mi",null,"u"),s("mi",null,"m")])])]),s("annotation",{encoding:"application/x-tex"}," \\rho_{(CHGCAR\\_diff)} = \\rho_{CHGCAR\\_AB} - \\rho_{CHGCAR\\_sum} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8278em","vertical-align":"-0.3972em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3448em"}},[s("span",{style:{top:"-2.5198em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mopen mtight"},"("),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.08125em"}},"H"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"GC"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10764em"}},"ff"),s("span",{class:"mclose mtight"},")")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3972em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9503em","vertical-align":"-0.367em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.08125em"}},"H"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"GC"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.367em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7976em","vertical-align":"-0.367em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.08125em"}},"H"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"GC"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight"},"m")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.367em"}},[s("span")])])])])])])])])])],-1),_=s("p",null,[a("执行后在 "),s("code",null,"O2_chg_diff/"),a(" 下生成了一个 "),s("code",null,"CHGCAR_diff"),a(" 文件，即为电荷密度差，因为")],-1),x=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mtable",{rowspacing:"0.25em",columnalign:"right left",columnspacing:"0em"},[s("mtr",null,[s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"ρ")])])]),s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mrow"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"B")])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"A")]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"B")])])])])]),s("mtr",null,[s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow")])]),s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mrow"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"B")])]),s("mo",null,"−"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"A")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"ρ"),s("mi",null,"B")]),s("mo",{stretchy:"false"},")")])])])]),s("mtr",null,[s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow")])]),s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mrow"),s("mo",null,"="),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"B")])]),s("mo",null,"−"),s("msub",null,[s("mi",null,"ρ"),s("mrow",null,[s("mi",null,"C"),s("mi",null,"H"),s("mi",null,"G"),s("mi",null,"C"),s("mi",null,"A"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"s"),s("mi",null,"u"),s("mi",null,"m")])])])])])])]),s("annotation",{encoding:"application/x-tex"}," \\begin{aligned} \\Delta \\rho &= \\rho_{AB} - \\rho_A - \\rho_B \\\\ &= \\rho_{AB} - (\\rho_A + \\rho_B) \\\\ &=\\rho_{AB} - \\rho_{CHGCAR\\_sum} \\end{aligned} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"4.507em","vertical-align":"-2.0035em"}}),s("span",{class:"mord"},[s("span",{class:"mtable"},[s("span",{class:"col-align-r"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"2.5035em"}},[s("span",{style:{top:"-4.6635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal"},"ρ")])]),s("span",{style:{top:"-3.1635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"})]),s("span",{style:{top:"-1.6635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"})])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"2.0035em"}},[s("span")])])])]),s("span",{class:"col-align-l"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"2.5035em"}},[s("span",{style:{top:"-4.6635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"}),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"A")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.1635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"}),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"A")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mclose"},")")])]),s("span",{style:{top:"-1.6635em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"}),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"ρ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.08125em"}},"H"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.07153em"}},"GC"),s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight"},"m")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.367em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"2.0035em"}},[s("span")])])])])])])])])])])],-1),G=n('<h4 id="显示" tabindex="-1"><a class="header-anchor" href="#显示" aria-hidden="true">#</a> 显示</h4><p>下载 <code>CHGCAR_diff</code>，使用 <code>VESTA</code> 显示：</p><figure><img src="'+o+`" alt="O2_chg_diff_VESTA" tabindex="0" loading="lazy"><figcaption>O2_chg_diff_VESTA</figcaption></figure><h3 id="为什么-chgdiff-pl-是后减前" tabindex="-1"><a class="header-anchor" href="#为什么-chgdiff-pl-是后减前" aria-hidden="true">#</a> 为什么 chgdiff.pl 是后减前？</h3><p>读取源码：</p><div class="language-perl line-numbers-mode" data-ext="perl"><pre class="language-perl"><code><span class="token comment">#!/usr/bin/env perl</span>
<span class="token comment">#;-*- Perl -*-</span>

<span class="token variable">@args</span> <span class="token operator">=</span> <span class="token variable">@ARGV</span><span class="token punctuation">;</span>
<span class="token variable">@args</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token keyword">die</span> <span class="token string">&quot;usage: chgdiff.pl &lt;reference CHGCAR&gt; &lt;CHGCAR2&gt;\\n&quot;</span><span class="token punctuation">;</span>

open <span class="token punctuation">(</span>IN1<span class="token punctuation">,</span><span class="token variable">$args</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">die</span> <span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t open file $!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
open <span class="token punctuation">(</span>IN2<span class="token punctuation">,</span><span class="token variable">$args</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">die</span> <span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t open file $!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
open <span class="token punctuation">(</span>OUT<span class="token punctuation">,</span><span class="token string">&quot;&gt;CHGCAR_diff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$line1</span> <span class="token operator">=</span> <span class="token filehandle symbol">&lt;IN1&gt;</span><span class="token punctuation">;</span>
    <span class="token variable">$line2</span> <span class="token operator">=</span> <span class="token filehandle symbol">&lt;IN2&gt;</span><span class="token punctuation">;</span>
    <span class="token variable">$header1</span> <span class="token operator">.=</span> <span class="token variable">$line1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token variable">$psum1</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$line1</span> <span class="token operator">=</span> <span class="token filehandle symbol">&lt;IN1&gt;</span><span class="token punctuation">;</span>
    <span class="token variable">$line1</span> <span class="token operator">=~</span> <span class="token regex">s/^\\s+//</span><span class="token punctuation">;</span>
    <span class="token variable">$line2</span> <span class="token operator">=</span> <span class="token filehandle symbol">&lt;IN2&gt;</span><span class="token punctuation">;</span>
    <span class="token variable">$line2</span> <span class="token operator">=~</span> <span class="token regex">s/^\\s+//</span><span class="token punctuation">;</span>
    <span class="token variable">@line1</span> <span class="token operator">=</span> split<span class="token punctuation">(</span><span class="token regex">/\\s+/</span><span class="token punctuation">,</span><span class="token variable">$line1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">@line2</span> <span class="token operator">=</span> split<span class="token punctuation">(</span><span class="token regex">/\\s+/</span><span class="token punctuation">,</span><span class="token variable">$line2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$j</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$j</span><span class="token operator">&lt;</span><span class="token variable">@line1</span><span class="token punctuation">;</span> <span class="token variable">$j</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$line1</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$line2</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token variable">$line1</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">#    printf OUT &quot; %18.11E %18.11E %18.11E %18.11E %18.11E\\n&quot;,$line1[0],$line1[1],$line1[2],$line1[3],$line1[4];</span>
    printf OUT <span class="token string">&quot; %18.11E&quot;</span> <span class="token operator">x</span> <span class="token variable">@line1</span> <span class="token operator">.</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">,</span> <span class="token variable">@line1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第 5 行：用法：<code>chgdiff.pl &lt;CHGCAR_1&gt; &lt;CHGCAR_2&gt;</code>.</p><p>第 7-15 行：第一个参数 <code>CHGCAR_1</code> 里的每一行记为 <code>line1</code>，第二个参数 <code>CHGCAR_2</code> 里的每一行记为 <code>line2</code>.</p><p>第 27 行，<code>line2-line1</code>，即 <code>CHGCAR_2 - CHGCAR_1</code>，即为后减前。</p><h3 id="chgdiff-pl-后少了原子" tabindex="-1"><a class="header-anchor" href="#chgdiff-pl-后少了原子" aria-hidden="true">#</a> chgdiff.pl 后少了原子</h3><p>由源码得，<code>chgdiff.pl</code> 保留的是 file1 的原子信息，所以如果 file1 只有部分原子就会缺。</p><p>这个脚本我感觉是 bug，建议把上面第 27 行 <code>line2-line1</code> 改成 <code>line1-line2</code> 一劳永逸。</p>`,12);function O(z,H){const l=t("RouterLink");return i(),p("div",null,[d,h,v,g,b,k,y,s("p",null,[a("电荷密度差分操作本可以在之前 "),m(l,{to:"/dft-learning/05.VASP/02.%E4%BC%98%E5%8C%96/02.vasp-opt.html"},{default:c(()=>[a("O2 结构优化、自洽、非自洽")]),_:1}),a(" 自洽之后进行，但是之前的自洽没有规定 FFT mesh，而电荷密度差分要求了，所以干脆从头算好了。")]),C,A,f,R,_,x,G])}const S=e(u,[["render",O],["__file","index.html.vue"]]);export{S as default};
